#+title: Emacs init

* Early Init
:PROPERTIES:
:header-args: :tangle ~/.config/emacs/early-init.el :comments no :mkdirp yes
:END:

#+begin_src emacs-lisp
  ;;; early-init.el --- Set up some pre-package.el defaults -*- lexical-binding: t; -*-

  ;;; Commentary:

  ;;; Code:
#+end_src

#+begin_src emacs-lisp
  (setq load-prefer-newer t)
  (setq frame-inhibit-implied-resize t)
#+end_src

#+begin_src emacs-lisp
  (eval-when-compile (defvar package-quickstart))
  (when (file-exists-p package-quickstart-file)
    (setq package-quickstart t))
#+end_src

I moved the custom-file to early init because when it was in the auto-tangled Org file some things ended up being saved in the init.el file and some in the custom-file, so there were weird errors occurring. This way there's only one location that I need to worry about.

#+begin_src emacs-lisp
  (setq custom-file (expand-file-name "custom-settings.el" user-emacs-directory))
  (load custom-file 'noerror)
#+end_src

#+begin_src emacs-lisp
  (provide 'early-init)
  ;;; early-init.el ends here
#+end_src

* Init
:PROPERTIES:
:header-args: :tangle ~/.config/emacs/init.el :comments no :mkdirp yes
:END:
** Lexical Binding
#+begin_src emacs-lisp
  ;;; init.el --- Emacs init -*- lexical-binding: t; -*-

  ;;; Commentary:

  ;;; Code:
#+end_src

** Very early

#+begin_src emacs-lisp
  (require 'package)
  (package-activate-all)
#+end_src

** Tangle
:PROPERTIES:
:CREATED:  [2022-01-10 Mon 14:14]
:END:

#+begin_src emacs-lisp
  (defvar actuator-directory (expand-file-name "~/env.d/")
    "Directory with actuator Org files.
  This is the directory where Emacs will try to tangle the config
  files from.")
#+end_src

#+begin_src emacs-lisp
  (let ((gc-cons-threshold (* 5000 1024 1024))
        (gc-cons-percentage))
        (require 'ob-tangle)
        (org-babel-load-file (expand-file-name "emacs-config.org" actuator-directory))
        (org-babel-load-file (expand-file-name "emacs-theme.org" actuator-directory)))
#+end_src

** Footer
#+begin_src emacs-lisp
  (provide 'init)
  ;;; init.el ends here
#+end_src
