#+title: MPD
#+index: MPD
#+index: Music!MPD

* MPD
:PROPERTIES:
:header-args: :tangle ~/.mpd/mpd.conf :comments no
:END:

MPD hates to create its own files.

#+begin_src shell :tangle no
  touch ~/.mpd/{database,pid,state,sticker.sql,log}
#+end_src

You /can/ enable mpd as a non-user unit, but it will cause no end of trouble and will not work. Do not do this.

#+begin_src shell :tangle no
  systemctl enable --user mpd
#+end_src

#+begin_src conf
  music_directory    "~/Music/Music Files"
  playlist_directory "~/Music/Playlists"
  db_file            "~/.mpd/database"
  pid_file           "~/.mpd/pid"
  state_file         "~/.mpd/state"
  sticker_file       "~/.mpd/sticker.sql"
  log_file           "~/.mpd/log"
  port               "6600"
  #auto_update        "yes"
#+end_src

#+begin_src conf :tangle (if (eq system-type 'darwin) "~/.mpd/mpd.conf" "no")
  audio_output {
  type       "osx"
  name       "CoreAudio"
  mixer_type "software"
  }
#+end_src

#+begin_src conf :tangle (if (eq system-type 'gnu/linux) "~/.mpd/mpd.conf" "no")
  audio_output {
  type "pulse"
  name "pulse audio"
  }
#+end_src
* MPD MacOS
#+begin_src xml :tangle no
  <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
  <plist version="1.0">
  <dict>
      <key>Label</key>
      <string>actuator.mpd</string>
      <key>WorkingDirectory</key>
      <string>/usr/local</string>
      <key>ProgramArguments</key>
      <array>
          <string>XDG_CONFIG_HOME=/Users/g/.config</string>
          <string>/usr/local/opt/mpd/bin/mpd</string>
          <string>--no-daemon</string>
      </array>
      <key>RunAtLoad</key>
      <true/>
      <key>KeepAlive</key>
      <true/>
      <key>ProcessType</key>
      <string>Interactive</string>
  </dict>
  </plist>
#+end_src
