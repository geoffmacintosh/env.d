#+title: Linux

* Install Notes
#+begin_src fish
  loadkeys colemak

  iwctl
  > station wlan0 scan
  > station wlan0 get-networks
  > station wlan0 connect X5-452

  timedatectl set-ntp true

  fdisk # BAD, use gdisk or parted
  # /dev/nvme0n1p1 512M EFI system partition (EF00)
  # /dev/nvme0n1p2 465.5G Linux filesystem (8300)

  mkfs.fat -F32 /dev/nvme0n1p1
  mkfs.btrfs /dev/nvme0n1p2

  mount /dev/nvme0n1p2 /mnt
  btrfs sub create /mnt/@
  btrfs sub create /mnt/@home
  btrfs sub create /mnt/@var
  btrfs sub create /mnt/@snapshots
  umount /mnt

  mount -o
  noatime,nodiratime,compress-force=zstd,space_cache=v2,ssd,subvol=@
  /dev/nvme0n1p2 /mnt
  mkdir /mnt/{boot,home,var,snapshots}
  mount /dev/nvme0n1p1 /mnt/boot
  mount -o ...subvol=@home /dev/nvme0n1p2 /mnt/home
  mount -o ...subvol=@var /dev/nvme0n1p2 /mnt/var
  mount -o ...subvol=@snapshots /dev/nvme0n1p2 /mnt/snapshots

  cd /mnt
  truncate -s 0 ./swapfile
  chattr +C ./swapfile
  btrfs property set ./swapfile compression none
  dd if=/dev/zero of=./swapfile bs=1M count=8000 status=progress
  chmod 600 ./swapfile
  mkswap ./swapfile
  swapon ./swapfile

  # edit /etc/fstab
  # /swapfile none swap defaults 0 0

  pacstrap /mnt base linux linux-firmware mg btrfs-progs amd-ucode iwd networkmanager

  genfstab -U /mnt >> /mnt/etc/fstab

  arch-chroot /mnt

  ln -sf /usr/share/zoneinfo/America/St_Johns /etc/localtime
  hwclock --systohc

  # edit /etc/locale.gen to uncomment en_CA.UTF-8

  locale-gen

  # create /etc/locale.conf to LANG=en_CA.UTF-8
  # create /etc/vconsole.conf be KEYMAP=colemak
  # create /etc/hostname to be d
  # edit /etc/mkinitcpio.conf to contain ...block btrfs keymap
  # filesystems...
  mkinitcpio -P

  passwd

  bootctl --path=/boot install

  # create /boot/loader/entries/arch.conf
  # title Arch Linux
  # linux /vmlinuz-linux
  # initrd /amd-ucode.img
  # initrd /initramfs-linux.img
  # options root=UUID=f3369b3c-4b0b-4fa4-9c94-c2b3e1ee6c85
  # rootflags=subvol=@ rw

  exit
  reboot
#+end_src

#+begin_src shell
  systemctl enable systemd-resolved
  systemctl enable NetworkManager

  nmcli
#+end_src

#+begin_src shell
  systemctl enable systemd-networktimed
  systemctl enable fstrim.timer
#+end_src

#+begin_src shell
  useradd -m -G wheel -s /bin/bash g
  passwd g

  pacman -S sudo
  EDITOR="mg -n" visudo

  # %wheel ALL=(ALL) ALL
  # Defaults passwd_timeout=0

  reboot

  pacman -S xorg-wayland sway alacritty wofi texinfo man-db man-pages

  sudo mg -n /etc/pacman.conf
  # ILoveCandy
  # enable multilib
#+end_src

* Application list
- paru :: AUR helper
- fish :: Default (human) shell
- qmk :: Keyboard configuration
- texlive-most :: LaTeX
- mpv :: Video playback
- anki :: Flashcards
- qbittorrent :: Torrents
- openrgb :: Fancy LED controller
- emacs-pgtk-native-comp-git :: Emacs with GTK and Native Comp
- pulseeffects :: An audio effects package for pipewire (noise reduction!)
- systemdgenie :: SystemD managemnent
- downgrade :: Pacman downgrading tool
- mangohud :: FPS overlay
- element-desktop :: Element
- discord :: Discord
- lyrebird :: voice changer
- obs-studio-wayland :: Stream/recording tool with Wayland support
- reflector :: Pacman mirror updater
- zathura :: PDF viewer
- imv :: Image viewer
- mako :: Notification daemon
- borg :: Backup tool
- amphetype :: Typing trainer
- mg :: Micro text editor (alias mg -n to mg for no backup files)
