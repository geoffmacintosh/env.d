#+title: Administrative

* Automatic login
#+begin_src conf :tangle (if (eq system-type 'gnu/linux) "/sudo::/etc/systemd/system/getty@tty1.service.d/override.conf" "no") :comments no
  [Service]
  ExecStart=
  ExecStart=-/usr/bin/agetty --autologin g --noclear %I $TERM
#+end_src

* Power button
#+begin_src conf :tangle (if (eq system-type 'gnu/linux) "/sudo::/etc/systemd/logind.conf.d/10-logind.conf" "no") :comments no
  [Login]
  HandlePowerKey=suspend
#+end_src
* Journal
#+begin_src conf  :tangle (if (eq system-type 'gnu/linux) "/sudo::/etc/systemd/journald.conf.d/00-journal-size.conf" "no") :comments no
  [Journal]
  SystemMaxUse=100M
#+end_src
* Reflector
Enable the timer via =systemctl enable reflector.timer=.

#+begin_src conf :tangle /sudo::/etc/xdg/reflector/reflector.conf :comments no
  --save /etc/pacman.d/mirrorlist
  --protocol https
  --country CA
  --country US
  --latest 25
  --age 12
  --sort rate
#+end_src
* Paccache clean

Install pacman-contrib.

#+begin_src shell :dir /sudo:: :results replace
  pacman --sync --noconfirm pacman-contrib
#+end_src

#+begin_src conf :tangle /sudo::/etc/pacman.d/hooks/clean_cache.hook
  [Trigger]
  Operation = Upgrade
  Operation = Install
  Operation = Remove
  Type = Package
  Target = *

  [Action]
  Description = Cleaning pacman cache...
  When = PostTransaction
  Exec = /usr/bin/paccache -r
#+end_src

*

* Fail lock
[[https://wiki.archlinux.org/index.php/Security#Lock_out_user_after_three_failed_login_attempts][Security - ArchWiki]]

As per =/etc/security/faillock.conf=:

- unlock_time :: the lockout time (in seconds, default 10 minutes).
- fail_interval :: the time in which failed logins can cause a lockout (in seconds, default 15 minutes).
- deny :: the number of failed logins before lockout (default 3).
- =deny = 0= will disable lockout

#+begin_src shell :dir /sudo::
  echo "deny = 0" | tee -a /etc/security/faillock.conf
#+end_src

#+results:
: deny = 0

* Set XKB for games
:LOGBOOK:
- Refiled on [2021-06-11 Fri 12:31]
:END:
[2021-06-11 Fri 12:06]

#+begin_src conf :tangle /sudo::/etc/X11/xorg.conf.d/00-keyboard.conf
  Section "InputClass"
          Identifier "keyboard defaults"
          MatchIsKeyboard "on"
          Option "XkbLayout" "us,us"
          Option "XkbVariant" ",colemak"
          Option "XkbOptions" "grp:shifts_toggle"
  EndSection
#+end_src

* Audio
:PROPERTIES:
:CREATED:  [2021-09-18 Sat 11:25]
:END:
#+begin_src conf :tangle (if *linux* "/sudo::/etc/modprobe.d/default.conf" "no") :comments no
  options snd_hda_intel index=1
#+end_src
